var body=document.querySelector("body");const header=document.createElement("header");var footer=document.createElement("footer");var posIconCart=document.createElement("span");var slides=document.querySelector(".slides");var slideImages=document.querySelectorAll(".slide");var prevBtn=document.getElementById("prevBtn");var nextBtn=document.getElementById("nextBtn");var posIconCart=document.createElement("span");var list=document.querySelector(".list-item");var listCart=document.querySelector(".list-item__cart");var toastMsg=document.querySelector(".toastMsg-wrap");var totalSlides=slideImages.length;var shoesAPI;var cartUserAPI;shoesAPI="https://hostapi-g350.onrender.com/api/product";cartUserAPI="https://hostapi-g350.onrender.com/api/cartUser";let currentIndex=0;const renderLoading={renderLoadingProduct:function(){if(shoesAPI==="http://localhost:3000/product"){var htmls=` <h1> Chạy git bash:<br> npm run start-api để hiển thị sản phẩm</h1>`}else if(shoesAPI==="https://hostapi-g350.onrender.com/api/product"){var htmls=`<div class="loading inner" data-text="Đang tải..."></div>`}else{var htmls=`<h1> Get API thất bại</h1>`}list.innerHTML=htmls},renderLoadingCart:function(){if(cartUserAPI==="http://localhost:3000/cartUser"){var htmls=` <h1> Chạy git bash:<br> npm run start-api để hiển thị sản phẩm</h1>`}else if(cartUserAPI==="https://hostapi-g350.onrender.com/api/cartUser"){var htmls=`<div class="loading inner" data-text="Đang tải..."></div>`}else{var htmls=`<h1> Get API thất bại</h1>`}listCart.innerHTML=htmls}};function showSlide(index){if(index>=totalSlides){currentIndex=0}else if(index<0){currentIndex=totalSlides-1}else{currentIndex=index}slides.style.transform=`translateX(-${currentIndex*100}%)`}function nextSlide(){showSlide(currentIndex+1)}function prevSlide(){showSlide(currentIndex-1)}function getItem(id,data,callback){var options={method:"GET",headers:{"Content-Type":"application/json"}};fetch(shoesAPI,options).then((function(response){return response.json()})).then((product=>product[id].page[data-1])).then(callback)}function addItem(data,callback){var options={method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}};fetch(cartUserAPI,options).then((function(response){return response.json()})).then((data=>{console.log("Add Item",data);toastMessage();ProductJS.getCartAPI(ProductJS.renderIconQuantityCart)})).then(callback)}function DeleteItem(data,callback){var options={method:"DELETE",headers:{"Content-Type":"application/json"}};fetch(cartUserAPI+"/"+data,options).then((function(response){return response.json()})).then((data=>{console.log("Delete: ",data);CartPageJS.start()})).then(callback)}function handleOther(data){addItem(data)}function debounce(func,delay){let timer;return function(...args){clearTimeout(timer);timer=setTimeout((()=>func.apply(this,args)),delay)}}function handleDeleteItem(data){debounce(DeleteItem(data.id),300)}function toastMessage(){const contentToastMsg=document.querySelector(".toastMsg");const duration=3e3;const delay=(duration/1e3).toFixed(2);const htmls=`\n        <span class="toastMsg__icon-wrap"> <i class="fa-solid fa-circle-check toastMsg__icon"></i></span>\n        <h4 class="toastMsg__heading">\n            Đã thêm sản phẩm vào giỏ hàng\n        </h4>\n    `;contentToastMsg.innerHTML=htmls;const autoRemoveId=setTimeout((function(){toastMsg.removeChild(contentToastMsg)}),duration+1e3);toastMsg.appendChild(contentToastMsg);toastMsg.classList.add("active");contentToastMsg.style.animation=`slideInLeft ease .3s, fadeOut linear 1s ${delay}s forwards`;clearTimeout(autoRemoveId)}function calPrice(data){let total=0;data.map((item=>{total+=parseInt(item.price.split(/\.|000VND/).join(""))}));usingToPrintTotal=String(total);if(total>=1e3&&total<1e4){usingToPrintTotal=usingToPrintTotal.substring(0,1)+"."+usingToPrintTotal.substring(1)+".000 VND"}else if(total>=1e4&&total<1e5){usingToPrintTotal=usingToPrintTotal.substring(0,2)+"."+usingToPrintTotal.substring(2)+".000 VND"}else if(total>=1e5){usingToPrintTotal=usingToPrintTotal.substring(0,3)+"."+usingToPrintTotal.substring(3)+".000 VND"}else if(total===0){usingToPrintTotal="0 VND"}else{usingToPrintTotal=String(total)+".000 VND"}return usingToPrintTotal}function Validator(options){function getParent(element,selector){while(element.parentElement){if(element.parentElement.matches(selector)){return element.parentElement}element=element.parentElement}}var selectorRules={};function validate(inputElement,rule){var errorElement=getParent(inputElement,options.formGroupSelector).querySelector(options.errorSelector);var errorMessage;var rules=selectorRules[rule.selector];for(var i=0;i<rules.length;++i){switch(inputElement.type){case"radio":case"checkbox":errorMessage=rules[i](formElement.querySelector(rule.selector+":checked"));break;default:errorMessage=rules[i](inputElement.value)}if(errorMessage)break}if(errorMessage){errorElement.innerText=errorMessage;getParent(inputElement,options.formGroupSelector).classList.add("invalid")}else{errorElement.innerText="";getParent(inputElement,options.formGroupSelector).classList.remove("invalid")}return!errorMessage}var formElement=document.querySelector(options.form);if(formElement){formElement.onsubmit=function(e){e.preventDefault();var isFormValid=true;options.rules.forEach((function(rule){var inputElement=formElement.querySelector(rule.selector);var isValid=validate(inputElement,rule);if(!isValid){isFormValid=false}}));if(isFormValid){if(typeof options.onSubmit==="function"){var enableInputs=formElement.querySelectorAll("[name]");var formValues=Array.from(enableInputs).reduce((function(values,input){switch(input.type){case"radio":case"checkbox":values[input.name]=formElement.querySelector('input[name="'+input.name+'"]:checked').value;break;default:values[input.name]=input.value}return values}),{});options.onSubmit(formValues)}else{formElement.submit()}}};options.rules.forEach((function(rule){if(Array.isArray(selectorRules[rule.selector])){selectorRules[rule.selector].push(rule.test)}else{selectorRules[rule.selector]=[rule.test]}var inputElements=formElement.querySelectorAll(rule.selector);Array.from(inputElements).forEach((function(inputElement){inputElement.onblur=function(){validate(inputElement,rule)};inputElement.oninput=function(){var errorElement=getParent(inputElement,options.formGroupSelector).querySelector(options.errorSelector);errorElement.innerText="";getParent(inputElement,options.formGroupSelector).classList.remove("invalid")}}))}))}}Validator.isRequired=function(selector,message){return{selector:selector,test:function(value){return value?undefined:message||"Vui lòng nhập trường này"}}};Validator.isEmail=function(selector,message){return{selector:selector,test:function(value){var phone=/0\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{3})$/;var regex=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return regex.test(value)||phone.test(value)?undefined:message||"trường này phải là email or sdt"}}};Validator.isPhone=function(selector,message){return{selector:selector,test:function(value){var phone=/0\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{3})$/;return phone.test(value)?undefined:message||"trường này phải là email or sdt"}}};Validator.minLength=function(selector,min,message){return{selector:selector,test:function(value){return value.length>=min?undefined:message||`Vui lòng nhập tối thiểu ${min} kí tự`}}};Validator.isConfirm=function(selector,getconfirm,message){return{selector:selector,test:function(value){return value===getconfirm()?undefined:message||"Giá trị nhập vào không chính xác"}}};const handleHeader={renderHeader:function(){const html=`\n        <div class="container">\n                <div class="header-wrap">\n                    <span class="icon-menu__header">\n                        <i class="fa-solid fa-bars"></i>\n                    </span>\n                    <a href="../../../index.html" class="logo-link">\n                        <img src="../../assets/images/HomeIMG/logo1.png"/ alt="" class="logo-pages">\n                    </a>\n                    <ul class="list-pages ">\n                        <li class="item-page item-page__home">\n                            <a href="../../../index.html" class="item-label">Trang Chủ</a>\n                        </li>\n                        <li class="item-page">\n                            <a href="../Intro/index.html" class="item-label">Giới thiệu</a>\n                        </li>\n                        <li class="item-page">\n                            <a href="../Product/index.html" class="item-label">Sản phẩm</a>\n                        </li>\n                        <li class="item-page">\n                            <a href="../Blogs/index.html" class="item-label">Blogs</a>\n                        </li>\n                        <li class="item-page">\n                            <a href="../Contact/index.html" class="item-label">Liên hệ</a>\n                        </li>\n                        <li class="item-page item-page__policies">\n                            <a href="../Policies/index.html" class="item-label">Chính Sách</a>\n                        </li>\n                    </ul>\n                    <ul class="list-actions">\n                        <li class="item-page__action item-page__action-icon">\n                        <a href="../Cart/index.html" class=" icon-cart">\n                            <i class="fa-solid fa-cart-shopping"></i>\n                        </a>\n                        </li>\n                        <li class="item-page__action item-page__action-fragment ">\n                            <span class="icon-action__wrap">\n                                <i class="fa-solid fa-user"></i>\n                            </span>\n                            <div class="item-page__action-wrap">\n                                \n                                <div class="item-page__action__sign-in">\n                                    <a href="../SignIn/index.html" >Đăng nhập</a>\n                                </div>\n                                <a class="item-page__action__sign-up" href="../SignUp/index.html" >Đăng ký</a>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        `;header.innerHTML=html;return body.appendChild(header)},handleEventHeader:function(){var btnMenu=document.querySelector(".icon-menu__header");var listPage=document.querySelector(".list-pages");var btnIconHeader=document.querySelector(".icon-action__wrap");var wrapSign=document.querySelector(".item-page__action-wrap");btnIconHeader.addEventListener("click",(()=>{if(wrapSign.classList.contains("icon-action__wrap__active")){wrapSign.classList.remove("icon-action__wrap__active")}else{wrapSign.classList.add("icon-action__wrap__active")}}));btnMenu.addEventListener("click",(()=>{if(listPage.classList.contains("list-pages__active")){listPage.classList.remove("list-pages__active")}else{listPage.classList.add("list-pages__active")}}))},start:function(){this.renderHeader();this.handleEventHeader()}};const handleFooter={renderFooter:function(){const html=`\n       <div class="container">\n            <div class="footer">\n                <ul class="list-footer">\n                    <li class="item-footer item-footer__left">\n                        <span>\n                            Hotline: 0912528877<br/>\n                            9:00 - 21:30, (T2-T7)<br/>\n                            Email: balance&gara@gmail.com\n                        </span>\n                        <span>\n                            <a href="#!">\n                                <i class="icon-footer fa-brands fa-instagram"></i>\n                            </a>\n                            <a href="#!">\n                                <i class="icon-footer fa-brands fa-square-facebook"></i>\n                            </a>\n                        </span>\n                    </li>\n                    <li class="item-footer item-footer__center">\n                        <div class="item-footer__center-content">\n                            <label class="item-footer__center-label">Sản phẩm</label>\n                            <ul>\n                                <li><a href="../Product/index.html" class="">Sản Phẩm mới</a></li>\n                                <li><a href="../Product/index.html" class="">Sản phẩm nổi bật</a></li>\n                                <li><a href="../Product/index.html" class="">Bộ sưu tập Air Force One</a></li>\n                                <li><a href="../Product/index.html" class="">Thương hiệu nổi bật</a></li>\n                                <li><a href="../Product/index.html" class="">Sản phẩm khuyến mãi</a></li>\n                            </ul>\n                        </div>\n                        <div class="item-footer__center-content">\n                            <label class="item-footer__center-label">Contract With Us</label>\n                            <ul>\n                                <li><a href="../Contact/index.html" class="">Đặt hàng số lượng lớn</a></li>\n                                <li><a href="../Contact/index.html" class="">Khách hàng doanh nghiệp</a></li>\n                                <li><a href="../Contact/index.html" class="">Hợp tác phối hợp</a></li>\n                                <li><a href="../Contact/index.html" class="">Hợp tác doanh nghiệp</a></li>\n                            </ul>\n                        </div>\n                    </li>\n                    <li class="item-footer">\n                        <p class="item-footer__desc">\n                            Hợp tác doanh nghiệp<br/>\n                            CÔNG TY TNHH Balance & Gara<br/>\n                            Khu II, Đ. 3 Tháng 2, Xuân Khánh, Ninh Kiều,<br/>\n                            Thành phố  Cần Thơ, Việt Nam<br/>\n                            MST: 0317645769<br/>\n                            Giấy phép ĐKKD số 0317645769<br/>\n                            cấp ngày 12 tháng 01 năm 2023<br/>\n                        </p>\n                        <img src="../../assets/images/HomeIMG/logo_bct_hihi.webp" alt="" class="logo-footer">\n                    </li>\n                </ul>\n                 <div class="list-footer__bottom">\n            <div class="item-footer__bottom">\n              <p class="item-footer__bottom-desc">\n                copyright © 2024 • All Rights Reserved\n              </p>\n            </div>\n            <div class="item-footer__bottom-center">\n              <ul class="item-footer__bottom-list">\n                <li>\n                  <a href="../Policies/index.html#doitra" class="item-footer__bottom-desc">\n                    Đổi trả\n                  </a>\n                </li>\n                <li>\n                  <a href="../Policies/index.html#thanhtoan" class="item-footer__bottom-desc">\n                    Chính sách thanh toán\n                  </a>\n                </li>\n                <li>\n                  <a href="../Policies/index.html#vanchuyen" class="item-footer__bottom-desc">\n                    Chính sách vận chuyển\n                  </a>\n                </li>\n                <li>\n                  <a href="../Policies/index.html#muahang" class="item-footer__bottom-desc">\n                    Hướng dẫn mua hàng\n                  </a>\n                </li>\n              </ul>\n            </div>\n            <div class="item-footer__bottom-right">\n              <ul class="item-footer__bottom-list">\n                <li>\n                  <a href="../Policies/index.html#uudai" class="item-footer__bottom-desc">\n                    Ưu đãi thành viên mới\n                  </a>\n                </li>\n                <li>\n                  <a href="../Policies/index.html#baohanh" class="item-footer__bottom-desc">\n                    Chính Sách bảo hành\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n            </div>\n        </div>\n    `;footer.innerHTML=html;return body.appendChild(footer)},renderBtn:function(){const btnTurnBack=document.createElement("div");body.setAttribute("id","body");const htmls=`\n            <a href="#body" class="btn__turn-back">\n                <i class="fa-solid fa-arrow-up-from-bracket"></i>\n            </a>\n        `;btnTurnBack.innerHTML=htmls;return body.appendChild(btnTurnBack)},start:function(){this.renderFooter();this.renderBtn()}};const HomePageJS={handleEvent:function(){setInterval(nextSlide,3500);document.querySelectorAll(".product-img img").forEach((img=>{const originalSrc=img.src;const hoverSrc=img.getAttribute("data-hover");img.addEventListener("mouseover",(()=>{img.src=hoverSrc}));img.addEventListener("mouseout",(()=>{img.src=originalSrc}))}));document.querySelectorAll(".box-product .color-dot").forEach((dot=>{dot.addEventListener("click",(()=>{const newSrc=dot.getAttribute("data-img-src");dot.closest(".box-product").querySelectorAll(".product-img img").forEach((img=>{img.src=newSrc}))}))}));nextBtn.addEventListener("click",nextSlide);prevBtn.addEventListener("click",prevSlide)}};const ContactJS={checkFormContact:function(){const mainmodal=document.querySelector(".main-modal");const closeBtn=document.querySelector(".btn button");mainmodal.classList.add("active");mainmodal.style.opacity="1";closeBtn.addEventListener("click",(()=>{mainmodal.style.opacity="0";setTimeout((()=>{mainmodal.classList.remove("contact-active")}),300)}))}};const ProductJS={getProductAPI:function(callback,id){console.log(shoesAPI);fetch(shoesAPI).then((response=>response.json())).then((data=>callback(data,id)))},getCartAPI:function(callback){fetch(cartUserAPI).then((response=>response.json())).then(callback)},renderProductAPI:function(ListOfAPI,id){const html=ListOfAPI[id].page.map((item=>`\n                <div data-id="${item.id}" class="item-product">\n                    <a href="#!"><img src="${item.img}" alt="" class="item-product__img"></a>\n                    <div class="item-product__wrap">\n                        <h4 class="item-product__heading">\n                            ${item.name}\n                        </h4>\n                        <h5 class="item-product__code">\n                            ${item.code}\n                        </h5>\n                        <p class="item-product__author">\n                            Hãng: ${item.author}\n                        </p>\n                        <p class="item-product__size">\n                            Size: ${item.size}\n                        </p>\n                        <p onclick="click(e)" class="item-product__price">\n                            Price: ${item.price}\n                        </p>\n                    </div>\n                    <button onclick ="getItem(${id},${item.id},handleOther)" class="item-product__other-btn">\n                        Đặt Hàng\n                    </button>\n                </div>\n                `));list.innerHTML=html.join("")},renderIconQuantityCart:function(data){var IconCart=document.querySelector(".icon-cart");posIconCart.setAttribute("class",".item-page__action-icon");const htmls=`\n            <span class="quantityIcon-header">${data.length}</span>\n        `;posIconCart.innerHTML=htmls;IconCart.appendChild(posIconCart)},renderIconQuantityCartForPages:function(){this.getCartAPI(this.renderIconQuantityCart)},start:function(id){this.getProductAPI(this.renderProductAPI,id);this.getCartAPI(this.renderIconQuantityCart)}};const CartPageJS={getCartAPI:function(callback){fetch(cartUserAPI).then((response=>response.json())).then(callback)},renderTotalPrice:function(data){var cardPayment=document.querySelector(".slide_payment");const total=calPrice(data);const html=`\n         <div class="slider-payment-wrap">\n              <h3 class="payment-heading">\n                  Thông tin đơn hàng\n              </h3>\n              <p class="payment-desc__temp">\n                  Tạm tính: ${total}\n              </p>\n              <p class="payment-desc__total">\n                  Tổng tính: ${total}\n              </p>\n              <p class="payment-desc__sub">\n                  Bạn có thể nhập mã giảm giá ở trang thanh toán\n              </p>\n              <button class="payment-btn__payed">\n                  Thanh toán\n              </button>\n         </div>\n      `;cardPayment.innerHTML=html},renderIconQuantityCart:function(data){var IconCart=document.querySelector(".icon-cart");posIconCart.setAttribute("class",".item-page__action-icon");const htmls=`\n          <span class="quantityIcon-header">${data.length}</span>\n        `;posIconCart.innerHTML=htmls;IconCart.appendChild(posIconCart)},renderCart:function(data){if(data.length!==0){const htmls=data.map((item=>`\n          <div class="item-cart" data-id="${item.id}">\n            <img src="${item.img}" alt="" class="item-cart__img">\n            <div class="item-cart__info col-lg-8">\n                <h4 class="item-cart__heading">${item.name}</h4>\n                <h5 class="item-cart__code">${item.code}</h5>\n                <p class="item-cart__size">Size: ${item.size}</p>\n                <p class="item-cart__price">${item.price}</p>\n            </div>\n            <button onclick="getItem(0,${item.id},handleDeleteItem)" class="btn-delete__cart" >&times</button>\n          </div>\n          `));listCart.innerHTML=htmls.join("")}else{listCart.innerHTML=`\n          <div class="textTemp-cart">Chưa có sản phẩm trong giỏ hàng</div>\n      `}},start:function(){this.getCartAPI(this.renderCart);this.getCartAPI(this.renderIconQuantityCart);this.getCartAPI(this.renderTotalPrice)}};